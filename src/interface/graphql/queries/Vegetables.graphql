query GetVegetableMasterAndUnitAndStocks {
  vegetable_master(
    order_by: {
      vegetable_master_vegetable_stocks: { is_favorite: desc_nulls_last }
    }
  ) {
    vegetable_id
    display_name
    vegetable_name
    image_uri
    default_expiration_period
    vegetable_master_unit_master {
      unit_id
      unit_name
    }
    vegetable_master_vegetable_stocks {
      stock_id
      quantity
      incremental_unit
      expiration_date
      memo
      is_favorite
    }
  }
}

query GetVegetableStockByUserIdAndVegetableId(
  $userId: String!
  $vegetableId: Int!
) {
  vegetable_stocks(
    where: { user_id: { _eq: $userId }, vegetable_id: { _eq: $vegetableId } }
  ) {
    stock_id
    user_id
    vegetable_id
    quantity
    expiration_date
    memo
    is_favorite
  }
}

mutation InsertVegetableStock($object: vegetable_stocks_insert_input!) {
  insert_vegetable_stocks_one(object: $object) {
    quantity
    stock_id
    user_id
    vegetable_id
    incremental_unit
    expiration_date
    memo
    is_favorite
  }
}

mutation UpdateVegetableStockQuantity(
  $userId: String!
  $vegetableId: Int!
  $quantity: Int!
  $expirationDate: date
) {
  update_vegetable_stocks(
    where: { user_id: { _eq: $userId }, vegetable_id: { _eq: $vegetableId } }
    _set: { quantity: $quantity, expiration_date: $expirationDate }
  ) {
    returning {
      stock_id
      user_id
      vegetable_id
      quantity
      expiration_date
    }
  }
}

mutation UpdateVegetableStockIsFavorite(
  $userId: String!
  $vegetableId: Int!
  $isFavorite: Boolean!
) {
  update_vegetable_stocks(
    where: { user_id: { _eq: $userId }, vegetable_id: { _eq: $vegetableId } }
    _set: { is_favorite: $isFavorite }
  ) {
    returning {
      stock_id
      user_id
      vegetable_id
      is_favorite
    }
  }
}

mutation UpdateVegetableStockDetail(
  $userId: String!
  $vegetableId: Int!
  $quantity: Int!
  $incrementalUnit: Int!
  $expirationDate: date!
  $memo: String!
) {
  update_vegetable_stocks(
    where: { user_id: { _eq: $userId }, vegetable_id: { _eq: $vegetableId } }
    _set: {
      quantity: $quantity
      incremental_unit: $incrementalUnit
      expiration_date: $expirationDate
      memo: $memo
    }
  ) {
    returning {
      stock_id
      user_id
      vegetable_id
      quantity
      incremental_unit
      expiration_date
      memo
    }
  }
}
